<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <!-- Updated Meta Info -->
        <meta name="description" content="A step-by-step guide on how to apply for a Chinese tourist visa, including requirements and visa-free transit policies." />
        <meta name="author" content="Wander in China" />
        <title>Step-by-Step Guide to Applying for a Chinese Visa - Wander in China</title>
        <!-- Favicon (Correct relative path from subpage/blogs/ to root) -->
        <link rel="icon" type="image/png" href="../../assets/img/favicon.png" sizes="32x32" />
        <!-- Bootstrap icons (CDN link, no change needed) -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (Correct relative path) -->
        <link href="../../css/styles.css" rel="stylesheet" />
        <!-- Custom CSS for clickable image -->
        <style>
            .img-clickable {
                cursor: pointer;
                transition: opacity 0.2s ease-in-out;
            }
            .img-clickable:hover {
                opacity: 0.8;
            }
        </style>
    </head>
    <body class="d-flex flex-column h-100">
        <main class="flex-shrink-0">
            <!-- 页头占位符 -->
            <div id="header-placeholder"></div>

            <!-- 页面内容 -->
            <!-- Blog Post Content Section -->
            <section class="py-5">
                <div class="container px-5 my-5">
                    <!-- Removed justify-content-center from the row -->
                    <div class="row gx-5">
                        <!-- Changed main content column width to col-lg-9 -->
                        <div class="col-lg-9">
                            <!-- Post Title -->
                            <h1 class="fw-bolder mb-4">Step-by-Step Guide to Applying for a Chinese Visa</h1>

                            <!-- Post Content -->
                            <article>
                                <!-- Section: Do You Need a Visa? -->
                                <h2 class="fw-bolder mt-5 mb-3">Do You Need a Visa?</h2>

                                <!-- Subsection: Tourist Visa Requirement -->
                                <h3 class="fw-bolder mt-4 mb-3">Tourist Visa Requirement</h3>
                                <p class="fs-5 mb-4">Most foreign tourists need a tourist (L-type) visa to visit China. This is the case if you plan to travel for sightseeing, visiting friends or relatives, or engaging in other non-business, non-work related activities. If your trip falls into this category, you'll need to go through the visa application process.</p>

                                <!-- Image: Visa -->
                                <figure class="my-5 text-center">
                                    <img class="img-fluid rounded w-75" src="../../assets/img/visa.jpg" alt="Chinese Visa Sticker Example" />
                                    <figcaption class="mt-2 text-center text-muted small">Most tourists require an L-type visa</figcaption>
                                </figure>

                                <!-- Subsection: Visa-free Situations -->
                                <h3 class="fw-bolder mt-4 mb-3">Visa-free Situations</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-3">
                                        <strong class="d-block mb-1">144-hour Visa-free Transit:</strong> Citizens of 53 countries are eligible for a 144-hour visa-free transit in certain Chinese cities. This includes major cities like Beijing, Shanghai, Guangzhou, and others. To qualify, you must be in transit through China, meaning you're traveling from one foreign country to another, and your onward flight or other means of transportation must be booked and departing within the 144-hour period.
                                    </li>
                                    <li class="mb-3">
                                        <strong class="d-block mb-1">72-hour Visa-free Transit:</strong> In some cities, a 72-hour visa-free transit policy also exists for eligible nationalities. Similar to the 144-hour policy, you need to be in transit and have a confirmed onward journey.
                                    </li>
                                    <li>
                                        <strong class="d-block mb-1">Hainan Visa-free Policy:</strong> For tourists from 59 countries, Hainan Island offers a 30-day visa-free stay. This is mainly for those who plan to visit Hainan for tourism purposes only.
                                    </li>
                                </ul>

                                <!-- Image: Visa Free -->
                                <figure class="my-5 text-center">
                                    <img class="img-fluid rounded w-75" src="../../assets/img/visa_free.png" alt="Visa Free Transit Sign" />
                                    <figcaption class="mt-2 text-center text-muted small">Check eligibility for visa-free transit or Hainan policy</figcaption>
                                </figure>

                                <!-- Section: Applying for a Chinese Tourist Visa -->
                                <h2 class="fw-bolder mt-5 mb-3">Applying for a Chinese Tourist Visa</h2>

                                <!-- Subsection: Step 1 -->
                                <h3 class="fw-bolder mt-4 mb-3">Step 1: Gather Required Documents</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-3"><strong class="d-block mb-1">Valid Passport:</strong> Your passport should have at least six months of remaining validity from the date of your intended entry into China and have at least two blank pages for visa stamps.</li>
                                    <li class="mb-3"><strong class="d-block mb-1">Visa Application Form:</strong> You can download the application form from the website of the Chinese embassy or consulate in your home country. Fill it out accurately with personal information, travel details, and other required information.</li>
                                    <li class="mb-3"><strong class="d-block mb-1">Recent Photo:</strong> A passport-sized photo, usually with a white background, taken within the last six months. Make sure the photo meets the specific requirements of the embassy or consulate, such as size and image quality.</li>
                                    <li><strong class="d-block mb-1">Proof of Travel Plans:</strong> This can include an itinerary of your planned travels in China, hotel reservations for the duration of your stay, and return or onward flight tickets. The itinerary should clearly show the cities you'll visit and the estimated duration of your stay in each place.</li>
                                </ul>

                                <!-- Subsection: Step 2 -->
                                <h3 class="fw-bolder mt-4 mb-3">Step 2: Schedule an Appointment</h3>
                                <p class="fs-5 mb-4">Most Chinese embassies and consulates require you to make an appointment for visa application submission. Visit their official website to find the online appointment system. Select a convenient date and time for your appointment. Make sure to arrive on time for the appointment.</p>

                                <!-- Subsection: Step 3 -->
                                <h3 class="fw-bolder mt-4 mb-3">Step 3: Submit Your Application</h3>
                                <p class="fs-5 mb-4">Bring all the required documents to the Chinese embassy or consulate on the appointed day. At the embassy or consulate, you'll need to submit your application, along with the documents. There may be a visa application fee, which can vary depending on your nationality and the type of visa you're applying for. Pay the fee as required.</p>

                                <!-- Subsection: Step 4 -->
                                <h3 class="fw-bolder mt-4 mb-3">Step 4: Wait for Processing</h3>
                                <p class="fs-5 mb-4">The visa processing time usually takes 4-7 business days. However, during peak travel seasons or in some special cases, it may take longer. You can usually track the status of your visa application on the embassy or consulate's website, if they provide such a service.</p>

                                <!-- Subsection: Step 5 -->
                                <h3 class="fw-bolder mt-4 mb-3">Step 5: Collect Your Visa</h3>
                                <p class="fs-5 mb-4">Once your visa is approved, you'll be notified. You can then go to the embassy or consulate to collect your passport with the visa sticker. In some cases, you can also choose to have your passport with the visa mailed back to you, for an additional fee.</p>

                                <!-- Section: Requirements for Visa-free Entry -->
                                <h2 class="fw-bolder mt-5 mb-3">Requirements for Visa-free Entry</h2>

                                <!-- Subsection: 144/72-hour Transit -->
                                <h3 class="fw-bolder mt-4 mb-3">144/72-hour Visa-free Transit</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-3"><strong class="d-block mb-1">Valid Passport:</strong> As with the visa application, your passport must be valid for at least six months from the date of entry into China.</li>
                                    <li class="mb-3"><strong class="d-block mb-1">Onward Ticket:</strong> You must have a confirmed onward ticket to a third country or region. This ticket should be for a departure within the 144-hour (or 72-hour) period. The flight or other transportation details should be clearly stated on the ticket.</li>
                                    <li><strong class="d-block mb-1">Proof of Itinerary:</strong> Although not always strictly required, it's a good idea to have a basic itinerary showing your transit route through China, especially if you plan to leave the airport during the transit period.</li>
                                </ul>

                                <!-- Image: Visa Policy (Clickable Thumbnail) -->
                                <figure class="my-5 text-center">
                                    <img class="img-fluid rounded w-50 img-clickable" src="../../assets/img/visa_policy.png" alt="Visa Policy Thumbnail - Click to enlarge" data-bs-toggle="modal" data-bs-target="#visaPolicyModal" />
                                    <figcaption class="mt-2 text-center text-muted small">Click image for visa policy details</figcaption>
                                </figure>

                                <!-- Subsection: Hainan Policy -->
                                <h3 class="fw-bolder mt-4 mb-3">Hainan Visa-free Policy</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-3"><strong class="d-block mb-1">Valid Passport:</strong> Again, a valid passport with sufficient remaining validity is necessary.</li>
                                    <li class="mb-3"><strong class="d-block mb-1">Proof of Accommodation in Hainan:</strong> You should have hotel reservations in Hainan for the duration of your stay. This helps to prove that you have a legitimate reason for staying in Hainan.</li>
                                    <li><strong class="d-block mb-1">Basic Travel Itinerary:</strong> While not as detailed as for a visa application, having a rough plan of the places you'll visit in Hainan can be useful. This can include popular tourist attractions you intend to visit.</li>
                                </ul>

                                <!-- Concluding Paragraph -->
                                <p class="fs-5 mt-5">Applying for a Chinese visa might seem daunting, but with careful preparation and by following the steps outlined above, you can navigate the process smoothly. Always double-check the latest requirements with the embassy or consulate.</p>

                                </article>
                            </div>

                            <!-- 将侧边栏样式 (bg-light p-3 rounded) 应用到列容器上 -->
                            <div class="col-lg-3 bg-light p-3 rounded"> <!-- 添加了 bg-light p-3 rounded -->
                                <div id="sidebar-placeholder" > <!-- Modified: Added data-show attribute -->
                                    <!-- sidebar.html 的内容将加载到这里 -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <!-- 页脚占位符 -->
        <div id="footer-placeholder"></div>

        <!-- Bootstrap core JS (CDN link, no change needed) -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS (Correct relative path) -->
        <script src="../../js/scripts.js"></script>
        <!-- Components loader (Correct relative path) -->
        <script src="../../js/components.js"></script>
        <!-- Added script to load recent posts -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Define the URL of the current article to find its data
                const currentArticleUrlFilename = 'apply_visa.html'; // <-- Updated filename

                fetch('../../data/blogs.json') // Fetch the JSON data
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(posts => {
                        // --- Populate Recent Posts (Existing Logic Refactored) ---
                        const recentPostsList = document.getElementById('recent-posts-list');
                        if (recentPostsList) {
                            const sortedPosts = [...posts].sort((a, b) => new Date(b.creationDate) - new Date(a.creationDate));
                            populatePostList(recentPostsList, sortedPosts.slice(0, 3));
                        }

                        // --- Populate You May Be Interested In (New Logic) ---
                        const interestedPostsList = document.getElementById('interested-posts-list');
                        if (interestedPostsList) {
                            const currentArticle = posts.find(post => post.url.endsWith(currentArticleUrlFilename)); // Find current article data

                            if (currentArticle && currentArticle.tags) {
                                const otherPosts = posts.filter(post => !post.url.endsWith(currentArticleUrlFilename)); // Exclude current article
                                const similarPosts = calculateSimilarity(currentArticle, otherPosts);

                                // Sort by similarity score (descending) and take top 3
                                similarPosts.sort((a, b) => b.similarity - a.similarity);
                                populatePostList(interestedPostsList, similarPosts.slice(0, 3));
                            } else {
                                // Handle case where current article or its tags aren't found
                                interestedPostsList.innerHTML = '<div class="p-3 text-warning small">Could not determine related posts.</div>';
                                if (!currentArticle) console.warn(`Could not find article data for URL: ${currentArticleUrlFilename}`);
                                if (currentArticle && !currentArticle.tags) console.warn(`Article "${currentArticle.title}" has no tags for comparison.`);
                            }
                        }
                    })
                    .catch(error => {
                        console.error('Error loading posts:', error);
                        // Display error in both lists if fetch fails
                        const recentPostsList = document.getElementById('recent-posts-list');
                        if (recentPostsList) recentPostsList.innerHTML = '<div class="p-3 text-danger small">Failed to load posts.</div>';
                        const interestedPostsList = document.getElementById('interested-posts-list');
                        if (interestedPostsList) interestedPostsList.innerHTML = '<div class="p-3 text-danger small">Failed to load posts.</div>';
                    });

                // Helper function to calculate similarity based on common tags
                function calculateSimilarity(currentArticle, otherPosts) {
                    const currentTags = new Set(currentArticle.tags);
                    return otherPosts.map(post => {
                        if (!post.tags) return { ...post, similarity: 0 }; // Handle posts without tags
                        const commonTags = post.tags.filter(tag => currentTags.has(tag));
                        return { ...post, similarity: commonTags.length }; // Add similarity score
                    }).filter(post => post.similarity > 0); // Optionally filter out posts with 0 similarity
                }

                // Helper function to populate a list container (Reused for both lists)
                function populatePostList(container, postsToDisplay) {
                    container.innerHTML = ''; // Clear loading/error message
                    if (!postsToDisplay || postsToDisplay.length === 0) {
                        container.innerHTML = '<div class="p-3 text-muted small">No relevant posts found.</div>';
                        return;
                    }
                    postsToDisplay.forEach(post => {
                        const urlParts = post.url.split('/');
                        const linkHref = urlParts[urlParts.length - 1]; // Use filename for link
                        // Ensure image path is relative to the current HTML file's location
                        const imageSrc = `../../${post.image.startsWith('../../') ? post.image.substring(6) : post.image}`;


                        const postElement = document.createElement('a');
                        postElement.href = linkHref;
                        postElement.className = 'list-group-item list-group-item-action p-3 d-flex align-items-start';
                        postElement.innerHTML = `
                            <div style="flex: 1 1 33.33%;" class="me-3"> <!-- Image container -->
                                <img src="${imageSrc}" alt="${post.title} Thumbnail" class="w-100" style="height: 60px; object-fit: cover;">
                            </div>
                            <div style="flex: 2 1 66.67%;"> <!-- Text container -->
                                <div class="fw-semibold small">${post.title}</div>
                                <div class="small text-muted">${post.creationDate}</div>
                            </div>
                        `;
                        container.appendChild(postElement);
                    });
                }
            });
        </script>
    </body>
</html>