<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <!-- Updated meta description and author -->
        <meta name="description" content="Your guide to using WeChat Pay and Alipay in China like a local. Learn how to set up, link cards, and make payments seamlessly." />
        <meta name="author" content="Wander in China" />
        <title>Pay Like a Local: WeChat Pay & Alipay Guide - Wander in China</title>
        <!-- Favicon (Correct relative path from subpage/blogs/ to root) -->
        <link rel="icon" type="image/png" href="../../assets/img/favicon.png" sizes="32x32" />
        <!-- Bootstrap icons (CDN link, no change needed) -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (Correct relative path) -->
        <link href="../../css/styles.css" rel="stylesheet" />
    </head>
    <body class="d-flex flex-column h-100">
        <main class="flex-shrink-0">
            <!-- 页头占位符 -->
            <div id="header-placeholder"></div>

            <!-- Blog Post Content Section -->
            <section class="py-5">
                <div class="container px-5 my-5">
                    <!-- Removed justify-content-center from the row -->
                    <div class="row gx-5">
                        <!-- Changed main content column width to col-lg-9 -->
                        <div class="col-lg-9">
                            <!-- Post Title -->
                            <h1 class="fw-bolder mb-4">Pay Like a Local in China: A Guide to WeChat Pay and Alipay</h1>

                            <!-- Introductory Image - Make it smaller -->
                            <figure class="mb-4 text-center"> <!-- Added text-center for caption -->
                                <img class="img-fluid rounded w-75" src="../../assets/img/alipay_wechat.png" alt="Mobile Payment QR Codes in China" /> <!-- Added w-75 -->
                                
                            </figure>

                            <!-- Post Content -->
                            <article>
                                <!-- Section: Ubiquitous Mobile Payments -->
                                <h2 class="fw-bolder mt-5 mb-3">Ubiquitous Mobile Payments in China</h2>
                                <p class="fs-5 mb-4">Mobile payments have seamlessly woven themselves into the fabric of daily life in China. From upscale restaurants to humble street food stalls, paying with WeChat Pay and Alipay is the norm. You'll find QR codes for these apps displayed prominently in shopping malls, convenience stores, and even small family-run shops, ready for a quick scan and payment. Transportation is equally digitized; these apps facilitate payments for subway fares in major cities, bus tickets, and even some taxi and ride-hailing services like Didi. Furthermore, purchasing tickets at tourist attractions, settling utility bills, or making transactions on online marketplaces all offer a smooth, cashless experience thanks to mobile payments.</p>

                                <!-- Section: Setting Up -->
                                <h2 class="fw-bolder mt-5 mb-3">Setting Up WeChat Pay and Alipay</h2>

                                <!-- Subsection: WeChat Pay Setup -->
                                <h3 class="fw-bolder mt-4 mb-3">WeChat Pay</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-2">
                                        <strong class="d-block mb-1">Download the App:</strong> Begin by downloading the WeChat app from your device's app store. It's readily available for both iOS and Android platforms.
                                    </li>
                                    <li>
                                        <strong class="d-block mb-1">Create an Account:</strong> Launch the app and follow the on-screen instructions to create your account. You can register using your phone number or an email address. If you opt for your phone number, you'll need to verify it via a one-time password sent to your mobile device.
                                    </li>
                                </ul>

                                <!-- Subsection: Alipay Setup -->
                                <h3 class="fw-bolder mt-4 mb-3">Alipay</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-2">
                                        <strong class="d-block mb-1">Get the Alipay App:</strong> Download the Alipay app from the appropriate app store.
                                    </li>
                                    <li>
                                        <strong class="d-block mb-1">Registration Process:</strong> Similar to WeChat Pay, initiate the registration by providing your phone number or email address. You'll be prompted to create a password and complete the necessary verification steps.
                                    </li>
                                </ul>

                                <!-- Image: Alipay App Interface - Center it -->
                                <figure class="my-5 text-center"> <!-- Added text-center -->
                                    <img class="img-fluid rounded" src="../../assets/img/alipay2.jpg" alt="Alipay App Interface Example" />
                                    <figcaption class="mt-2 text-center text-muted small">The Alipay app interface</figcaption>
                                </figure>

                                <!-- Section: Linking Payment Methods -->
                                <h2 class="fw-bolder mt-5 mb-3">Linking Your Payment Methods</h2>

                                <!-- Subsection: WeChat Pay Linking -->
                                <h3 class="fw-bolder mt-4 mb-3">WeChat Pay</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li>
                                        <strong class="d-block mb-1">Linking a Bank Card:</strong> Within the WeChat app, navigate to the "Me" tab, then select "Wallet." Tap on "Bank Cards" and then "Add Bank Card." You'll be required to enter your card details, including the card number, expiration date, and CVV code. Major international credit cards like Visa, MasterCard, and American Express are generally accepted. After entering the information, you may need to verify the card with a one-time password sent to the mobile number associated with your card.
                                    </li>
                                </ul>

                                <!-- Subsection: Alipay Linking -->
                                <h3 class="fw-bolder mt-4 mb-3">Alipay</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li>
                                        <strong class="d-block mb-1">Adding a Card:</strong> Open the Alipay app and tap "My" in the bottom-right corner. Next, select "Bank Cards." Tap "Add Card" and input your card information. Alipay also supports a wide range of international cards. Once you've entered the details, follow the verification prompts, which might involve receiving a verification code on your card's registered mobile number.
                                    </li>
                                </ul>

                                <p class="fs-5 mb-4"><strong class="d-block mb-1">Alternative Payment Options:</strong> Beyond traditional bank cards, both WeChat Pay and Alipay offer other payment methods. You might be able to link prepaid cards or, in some instances, utilize services like Apple Pay or Google Pay if they are integrated with the apps. However, for most international visitors, linking an international credit card remains the most straightforward way to begin using these prevalent mobile payment platforms in China.</p>

                                <!-- Image: Alipay Guide -->
                                <figure class="my-5">
                                    <img class="img-fluid rounded" src="../../assets/img/alipay_guide.png" alt="Guide on using Alipay in China" />
                                    <figcaption class="mt-2 text-center text-muted small">Linking cards and making payments</figcaption>
                                </figure>

                                <!-- Section: Making Payments -->
                                <h2 class="fw-bolder mt-5 mb-3">Making Payments with WeChat Pay and Alipay</h2>

                                <!-- Subsection: Scanning Merchant QR -->
                                <h3 class="fw-bolder mt-4 mb-3">Scanning the Merchant's QR Code</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-3">
                                        <strong class="d-block mb-1">WeChat Pay:</strong> Open the WeChat app. In the top-right corner of the main screen, tap the "+" icon and choose "Scan." Point your phone's camera at the merchant's QR code. Sometimes, the payment amount will be automatically filled if the merchant has preset it. If not, you'll need to manually enter the correct amount. Double-check all the details and then tap "Pay." You'll be asked to enter your payment password or use other pre-configured authentication methods (like fingerprint or facial recognition, if enabled) to finalize the transaction.
                                    </li>
                                    <li>
                                        <strong class="d-block mb-1">Alipay:</strong> On the Alipay home screen, tap the "Scan" button. Aim your camera at the merchant's QR code. After scanning, if the amount isn't pre-filled, enter the correct price. Review the details, including the merchant's name and the amount, and tap "Confirm Payment." Similar to WeChat Pay, you'll need to authenticate the payment, either by entering your password or using biometric verification.
                                    </li>
                                </ul>

                                <!-- Subsection: Being Scanned by Merchant -->
                                <h3 class="fw-bolder mt-4 mb-3">Being Scanned by the Merchant</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-3">
                                        <strong class="d-block mb-1">WeChat Pay:</strong> When you're ready to pay, open the WeChat app. Tap the "+" icon in the top-right corner of the main screen and select "Pay." A QR code and a barcode will appear on your screen. The merchant will then use a scanner to read these codes. Always verify the amount being charged. If you've set up a payment password for added security, you'll need to enter it after the merchant scans your code.
                                    </li>
                                    <li>
                                        <strong class="d-block mb-1">Alipay:</strong> Open the Alipay app. On the home screen, locate and tap the "Pay" option. A QR code and barcode will be displayed, which the merchant can scan. Alipay might prompt you to enter a payment password or use biometric authentication (fingerprint or facial recognition, if set up) to authorize the payment.
                                    </li>
                                </ul>

                                <!-- Subsection: Alipay Tap & Pay -->
                                <h3 class="fw-bolder mt-4 mb-3">Alipay "Tap & Pay" (NFC Required)</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-3">
                                        <strong class="d-block mb-1">Enable NFC:</strong> First, ensure your mobile device has Near Field Communication (NFC) capability and that it's turned on. On Android devices, you can typically find the NFC setting in your device's "Settings" menu, often under "Connected devices" or "More connection settings." On some iOS devices, NFC is automatically enabled for certain apps like Alipay.
                                    </li>
                                    <li>
                                        <strong class="d-block mb-1">Use "Tap & Pay":</strong> Open the Alipay app. Look for the "Tap & Pay" option, usually found on the home screen or within the app's main menu. When you're at a merchant that supports Alipay "Tap & Pay," simply hold your phone near the payment terminal. The app will recognize the terminal, and you may be asked to confirm the payment amount. If you've configured a payment password or biometric authentication, you'll need to complete the verification process to finalize the payment.
                                    </li>
                                </ul>

                                <!-- Concluding Paragraph -->
                                <p class="fs-5 mt-5">Embracing mobile payments like Alipay and WeChat Pay can significantly streamline your transactions in China. By setting up your accounts before or upon arrival, you'll be ready to pay like a local for nearly everything, making your trip more convenient and integrated.</p>

                            </article>
                        </div>

                        <!-- 将侧边栏样式 (bg-light p-3 rounded) 应用到列容器上 -->
                        <div class="col-lg-3 bg-light p-3 rounded"> <!-- 添加了 bg-light p-3 rounded -->
                            <div id="sidebar-placeholder">
                                <!-- sidebar.html 的内容将加载到这里 -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <!-- 页脚占位符 -->
        <div id="footer-placeholder"></div>

        <!-- Bootstrap core JS (CDN link, no change needed) -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS (Correct relative path) -->
        <script src="../../js/scripts.js"></script>
        <!-- Components loader (Correct relative path) -->
        <script src="../../js/components.js"></script>
        <!-- Added script to load recent posts -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Define the URL of the current article to find its data
                const currentArticleUrlFilename = 'mobile_payment.html'; // <-- Updated filename

                fetch('../../data/blogs.json') // Fetch the JSON data
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(posts => {
                        // --- Populate Recent Posts (Existing Logic Refactored) ---
                        const recentPostsList = document.getElementById('recent-posts-list');
                        if (recentPostsList) {
                            const sortedPosts = [...posts].sort((a, b) => new Date(b.creationDate) - new Date(a.creationDate));
                            populatePostList(recentPostsList, sortedPosts.slice(0, 3));
                        }

                        // --- Populate You May Be Interested In (New Logic) ---
                        const interestedPostsList = document.getElementById('interested-posts-list');
                        if (interestedPostsList) {
                            const currentArticle = posts.find(post => post.url.endsWith(currentArticleUrlFilename)); // Find current article data

                            if (currentArticle && currentArticle.tags) {
                                const otherPosts = posts.filter(post => !post.url.endsWith(currentArticleUrlFilename)); // Exclude current article
                                const similarPosts = calculateSimilarity(currentArticle, otherPosts);

                                // Sort by similarity score (descending) and take top 3
                                similarPosts.sort((a, b) => b.similarity - a.similarity);
                                populatePostList(interestedPostsList, similarPosts.slice(0, 3));
                            } else {
                                // Handle case where current article or its tags aren't found
                                interestedPostsList.innerHTML = '<div class="p-3 text-warning small">Could not determine related posts.</div>';
                                if (!currentArticle) console.warn(`Could not find article data for URL: ${currentArticleUrlFilename}`);
                                if (currentArticle && !currentArticle.tags) console.warn(`Article "${currentArticle.title}" has no tags for comparison.`);
                            }
                        }
                    })
                    .catch(error => {
                        console.error('Error loading posts:', error);
                        // Display error in both lists if fetch fails
                        const recentPostsList = document.getElementById('recent-posts-list');
                        if (recentPostsList) recentPostsList.innerHTML = '<div class="p-3 text-danger small">Failed to load posts.</div>';
                        const interestedPostsList = document.getElementById('interested-posts-list');
                        if (interestedPostsList) interestedPostsList.innerHTML = '<div class="p-3 text-danger small">Failed to load posts.</div>';
                    });

                // Helper function to calculate similarity based on common tags
                function calculateSimilarity(currentArticle, otherPosts) {
                    const currentTags = new Set(currentArticle.tags);
                    return otherPosts.map(post => {
                        if (!post.tags) return { ...post, similarity: 0 }; // Handle posts without tags
                        const commonTags = post.tags.filter(tag => currentTags.has(tag));
                        return { ...post, similarity: commonTags.length }; // Add similarity score
                    }).filter(post => post.similarity > 0); // Optionally filter out posts with 0 similarity
                }

                // Helper function to populate a list container (Reused for both lists)
                function populatePostList(container, postsToDisplay) {
                    container.innerHTML = ''; // Clear loading/error message
                    if (!postsToDisplay || postsToDisplay.length === 0) {
                        container.innerHTML = '<div class="p-3 text-muted small">No relevant posts found.</div>';
                        return;
                    }
                    postsToDisplay.forEach(post => {
                        const urlParts = post.url.split('/');
                        const linkHref = urlParts[urlParts.length - 1]; // Use filename for link
                        // Ensure image path is relative to the current HTML file's location
                        const imageSrc = `../../${post.image.startsWith('../../') ? post.image.substring(6) : post.image}`;


                        const postElement = document.createElement('a');
                        postElement.href = linkHref;
                        postElement.className = 'list-group-item list-group-item-action p-3 d-flex align-items-start';
                        postElement.innerHTML = `
                            <div style="flex: 1 1 33.33%;" class="me-3"> <!-- Image container -->
                                <img src="${imageSrc}" alt="${post.title} Thumbnail" class="w-100" style="height: 60px; object-fit: cover;">
                            </div>
                            <div style="flex: 2 1 66.67%;"> <!-- Text container -->
                                <div class="fw-semibold small">${post.title}</div>
                                <div class="small text-muted">${post.creationDate}</div>
                            </div>
                        `;
                        container.appendChild(postElement);
                    });
                }
            });
        </script>
    </body>
</html>