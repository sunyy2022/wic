<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <!-- Updated meta description and author -->
        <meta name="description" content="Guide to staying connected in China: Learn about eSIMs, pocket Wi-Fi, local SIM cards, public Wi-Fi, and VPN usage for travelers." />
        <meta name="author" content="Wander in China" />
        <title>Staying Connected in China: eSIMs, Wi-Fi & More - Wander in China</title>
        <!-- Favicon (Correct relative path from subpage/blogs/ to root) -->
        <link rel="icon" type="image/png" href="../../assets/img/favicon.png" sizes="32x32" />
        <!-- Bootstrap icons (CDN link, no change needed) -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (Correct relative path) -->
        <link href="../../css/styles.css" rel="stylesheet" />
    </head>
    <body class="d-flex flex-column h-100">
        <main class="flex-shrink-0">
            <!-- 页头占位符 -->
            <div id="header-placeholder"></div>

            <!-- Blog Post Content Section -->
            <section class="py-5">
                <div class="container px-5 my-5">
                    <!-- Removed justify-content-center from the row -->
                    <div class="row gx-5">
                        <!-- Changed main content column width to col-lg-9 -->
                        <div class="col-lg-9">
                            <!-- Post Title -->
                            <h1 class="fw-bolder mb-4">Staying Connected in China: SIM Cards, Wi-Fi, and VPNs</h1>

                            <!-- Introductory Paragraph -->
                            <p class="fs-5 mb-4">Remaining connected is essential for any traveler, and China offers several convenient options. This guide explores eSIMs, pocket Wi-Fi devices, local SIM cards, and public Wi-Fi to help you stay online during your trip.</p>

                            <!-- Post Content -->
                            <article>
                                <!-- Section: eSIM Options -->
                                <h2 class="fw-bolder mt-5 mb-3">eSIM Options</h2>

                                <!-- Subsection: What is an eSIM? -->
                                <h3 class="fw-bolder mt-4 mb-3">What is an eSIM?</h3>
                                <p class="fs-5 mb-4">An eSIM (embedded SIM) is a digital SIM card built directly into your device. This technology allows you to activate a mobile data plan without the need for a physical SIM card. Many contemporary smartphones, tablets, and smartwatches are equipped with eSIM capabilities.</p>

                                <!-- Image: Phone with eSIM symbol -->
                                <figure class="my-5 text-center">
                                    <img class="img-fluid rounded w-75" src="../../assets/img/phone.webp" alt="Smartphone showing eSIM capability" />
                                    <figcaption class="mt-2 text-center text-muted small">Modern phones often support eSIM technology</figcaption>
                                </figure>

                                <!-- Subsection: Using eSIM in China -->
                                <h3 class="fw-bolder mt-4 mb-3">Using eSIM in China</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-3">
                                        <strong class="d-block mb-1">Availability:</strong> Several international eSIM providers offer data plans specifically tailored for use in China. You can conveniently purchase and activate these plans before you even begin your journey. Popular providers like Airalo and Holafly offer eSIM options for travelers, typically with a pre-allocated amount of data valid for a specific duration, such as 7, 14, or 30 days.
                                    </li>
                                    <li>
                                        <strong class="d-block mb-1">Activation:</strong> Once you've selected and purchased an eSIM plan, the activation process generally involves scanning a QR code or manually entering an activation code within your device's settings. It's crucial to ensure your device is eSIM-compatible and to meticulously follow the instructions provided by your chosen eSIM provider.
                                    </li>
                                </ul>

                                <!-- Section: Pocket Wi-Fi -->
                                <h2 class="fw-bolder mt-5 mb-3">Pocket Wi-Fi (Mobile Wi-Fi Devices)</h2>

                                <!-- Subsection: Renting Pocket Wi-Fi -->
                                <h3 class="fw-bolder mt-4 mb-3">Renting a Pocket Wi-Fi Device</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-3">
                                        <strong class="d-block mb-1">Where to Rent:</strong> Pocket Wi-Fi devices can be rented from various sources. Many major airports in China, including Beijing Capital International Airport and Shanghai Pudong International Airport, have dedicated rental counters. You can also conveniently rent them online through services like Klook or Wi-Fi Egg. Additionally, some hotels within China may offer pocket Wi-Fi rental services for their guests.
                                    </li>
                                    <li class="mb-3">
                                        <strong class="d-block mb-1">Cost and Data Limits:</strong> The cost of renting a pocket Wi-Fi device varies depending on factors such as the daily data allowance and the length of the rental period. Typically, you can expect to pay around $5 to $15 per day. Data plans can range from 1GB per day to unlimited data options.
                                    </li>
                                    <li>
                                        <strong class="d-block mb-1">Using the Device:</strong> Upon receiving your pocket Wi-Fi device, simply turn it on. It will establish a local Wi-Fi hotspot, allowing you to connect multiple devices such as your phone, tablet, and laptop using the provided Wi-Fi password. Be aware that the device's battery life can be limited, so it's advisable to carry a portable charger.
                                    </li>
                                </ul>

                                <!-- Image: Pocket Wi-Fi device - Make smaller -->
                                <figure class="my-5 text-center">
                                    <img class="img-fluid rounded w-50" src="../../assets/img/pocket_wifi.jpg" alt="Pocket Wi-Fi device for travelers" /> <!-- Changed w-75 to w-50 -->
                                    <figcaption class="mt-2 text-center text-muted small">Rent a pocket Wi-Fi for multiple device connections</figcaption>
                                </figure>

                                <!-- Section: Local SIM Cards -->
                                <h2 class="fw-bolder mt-5 mb-3">Local SIM Cards</h2>

                                <!-- Subsection: Buying Local SIM -->
                                <h3 class="fw-bolder mt-4 mb-3">Buying a Local SIM Card</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-3">
                                        <strong class="d-block mb-1">Locations:</strong> Local SIM cards are readily available for purchase at airports, official stores of major telecommunication operators (China Mobile, China Unicom, and China Telecom), and some convenience stores, particularly in larger cities. In Beijing, for example, you can find numerous mobile phone stores in popular shopping districts like Wangfujing or Xidan.
                                    </li>
                                    <li class="mb-3">
                                        <strong class="d-block mb-1">What You Need:</strong> To purchase a local SIM card, you will be required to present your valid passport for identification purposes. This is a standard procedure across China.
                                    </li>
                                    <li>
                                        <strong class="d-block mb-1">Plan Selection:</strong> Each of the major operators offers a variety of data plans to suit different needs. If your primary requirement is data for navigation and app usage, look for plans with generous data allowances. For instance, China Mobile might offer a plan with 10GB of data valid for a week at a competitive price. Some plans also include call minutes, which can be beneficial if you anticipate making local phone calls.
                                    </li>
                                </ul>

                                <!-- Image: Airport SIM card counter - Make smaller -->
                                <figure class="my-5 text-center">
                                    <img class="img-fluid rounded w-75" src="../../assets/img/airport.jpeg" alt="SIM card purchase counter at an airport" /> <!-- Added w-75 -->
                                    <figcaption class="mt-2 text-center text-muted small">Purchase local SIM cards easily at the airport</figcaption>
                                </figure>

                                <!-- Section: Public Wi-Fi -->
                                <h2 class="fw-bolder mt-5 mb-3">Public Wi-Fi</h2>

                                <!-- Subsection: Free Public Wi-Fi -->
                                <h3 class="fw-bolder mt-4 mb-3">Free Public Wi-Fi</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-3">
                                        <strong class="d-block mb-1">Availability:</strong> Free public Wi-Fi is widely accessible in many public spaces throughout China, including airports, shopping centers, cafes, and some parks. At airports, you can usually connect to the airport's Wi-Fi network after providing basic information, such as your email address. In cafes, both international chains like Starbucks and local Chinese establishments typically provide the Wi-Fi password upon request.
                                    </li>
                                    <li>
                                        <strong class="d-block mb-1">Limitations:</strong> However, public Wi-Fi in China does come with certain limitations. Some networks may require a local Chinese mobile phone number to receive a verification code for access. Additionally, the speed and reliability of public Wi-Fi can fluctuate. In crowded areas, the connection speed may be noticeably slower.
                                    </li>
                                </ul>

                                <!-- Image: Cafe with Wi-Fi symbol - Make smaller -->
                                <figure class="my-5 text-center">
                                    <img class="img-fluid rounded w-50" src="../../assets/img/cafe.webp" alt="Cafe offering free Wi-Fi" /> <!-- Changed w-75 to w-50 -->
                                    <figcaption class="mt-2 text-center text-muted small">Many cafes offer free public Wi-Fi</figcaption>
                                </figure>

                                <!-- Subsection: Using VPN -->
                                <h3 class="fw-bolder mt-4 mb-3">Using VPN with Public Wi-Fi</h3>
                                <ul class="list-unstyled mb-4 fs-5">
                                    <li class="mb-3">
                                        <strong class="d-block mb-1">VPN Requirement:</strong> It's important to note that accessing certain international websites and online services that are restricted within China necessitates the use of a Virtual Private Network (VPN). If you intend to use public Wi-Fi to access such content, employing a VPN is essential. Be aware that not all VPN services are legal in China, so it's crucial to choose a reputable and compliant provider. Examples of VPN services that have been reported to work within Chinese regulations include ExpressVPN and NordVPN.
                                    </li>
                                    <li>
                                        <strong class="d-block mb-1">Setting up a VPN:</strong> To utilize a VPN, you will need to download and install the VPN application on your device before arriving in China, as some app stores within China may not offer VPN apps. Once installed, follow the setup instructions provided by your chosen VPN service. After installation, you can connect to a VPN server and then access blocked content through the public Wi-Fi network.
                                    </li>
                                </ul>

                                <!-- Image: VPN connection symbol -->
                                <figure class="my-5 text-center">
                                    <img class="img-fluid rounded w-50" src="../../assets/img/vpn.jpg" alt="VPN connection symbol on a device" /> <!-- Made VPN image smaller -->
                                    <figcaption class="mt-2 text-center text-muted small">Use a VPN to access restricted sites on public Wi-Fi</figcaption>
                                </figure>

                                <!-- Concluding Paragraph -->
                                <p class="fs-5 mt-5">Staying connected in China requires a bit of planning, especially regarding VPNs. Whether you choose a local SIM, rely on Wi-Fi, or use an eSIM, understanding your options will help you maintain communication and access the information you need during your travels.</p>

                            </article>
                        </div>

                        <!-- 将侧边栏样式 (bg-light p-3 rounded) 应用到列容器上 -->
                        <div class="col-lg-3 bg-light p-3 rounded"> <!-- 添加了 bg-light p-3 rounded -->
                            <div id="sidebar-placeholder">
                                <!-- sidebar.html 的内容将加载到这里 -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <!-- 页脚占位符 -->
        <div id="footer-placeholder"></div>

        <!-- Bootstrap core JS (CDN link, no change needed) -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS (Correct relative path) -->
        <script src="../../js/scripts.js"></script>
        <!-- Components loader (Correct relative path) -->
        <script src="../../js/components.js"></script>
        <!-- Added script to load recent posts -->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Define the URL of the current article to find its data
                const currentArticleUrlFilename = 'stay_connected.html'; // <-- Updated filename

                fetch('../../data/blogs.json') // Fetch the JSON data
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(posts => {
                        // --- Populate Recent Posts (Existing Logic Refactored) ---
                        const recentPostsList = document.getElementById('recent-posts-list');
                        if (recentPostsList) {
                            const sortedPosts = [...posts].sort((a, b) => new Date(b.creationDate) - new Date(a.creationDate));
                            populatePostList(recentPostsList, sortedPosts.slice(0, 3));
                        }

                        // --- Populate You May Be Interested In (New Logic) ---
                        const interestedPostsList = document.getElementById('interested-posts-list');
                        if (interestedPostsList) {
                            const currentArticle = posts.find(post => post.url.endsWith(currentArticleUrlFilename)); // Find current article data

                            if (currentArticle && currentArticle.tags) {
                                const otherPosts = posts.filter(post => !post.url.endsWith(currentArticleUrlFilename)); // Exclude current article
                                const similarPosts = calculateSimilarity(currentArticle, otherPosts);

                                // Sort by similarity score (descending) and take top 3
                                similarPosts.sort((a, b) => b.similarity - a.similarity);
                                populatePostList(interestedPostsList, similarPosts.slice(0, 3));
                            } else {
                                // Handle case where current article or its tags aren't found
                                interestedPostsList.innerHTML = '<div class="p-3 text-warning small">Could not determine related posts.</div>';
                                if (!currentArticle) console.warn(`Could not find article data for URL: ${currentArticleUrlFilename}`);
                                if (currentArticle && !currentArticle.tags) console.warn(`Article "${currentArticle.title}" has no tags for comparison.`);
                            }
                        }
                    })
                    .catch(error => {
                        console.error('Error loading posts:', error);
                        // Display error in both lists if fetch fails
                        const recentPostsList = document.getElementById('recent-posts-list');
                        if (recentPostsList) recentPostsList.innerHTML = '<div class="p-3 text-danger small">Failed to load posts.</div>';
                        const interestedPostsList = document.getElementById('interested-posts-list');
                        if (interestedPostsList) interestedPostsList.innerHTML = '<div class="p-3 text-danger small">Failed to load posts.</div>';
                    });

                // Helper function to calculate similarity based on common tags
                function calculateSimilarity(currentArticle, otherPosts) {
                    const currentTags = new Set(currentArticle.tags);
                    return otherPosts.map(post => {
                        if (!post.tags) return { ...post, similarity: 0 }; // Handle posts without tags
                        const commonTags = post.tags.filter(tag => currentTags.has(tag));
                        return { ...post, similarity: commonTags.length }; // Add similarity score
                    }).filter(post => post.similarity > 0); // Optionally filter out posts with 0 similarity
                }

                // Helper function to populate a list container (Reused for both lists)
                function populatePostList(container, postsToDisplay) {
                    container.innerHTML = ''; // Clear loading/error message
                    if (!postsToDisplay || postsToDisplay.length === 0) {
                        container.innerHTML = '<div class="p-3 text-muted small">No relevant posts found.</div>';
                        return;
                    }
                    postsToDisplay.forEach(post => {
                        const urlParts = post.url.split('/');
                        const linkHref = urlParts[urlParts.length - 1]; // Use filename for link
                        // Ensure image path is relative to the current HTML file's location
                        const imageSrc = `../../${post.image.startsWith('../../') ? post.image.substring(6) : post.image}`;


                        const postElement = document.createElement('a');
                        postElement.href = linkHref;
                        postElement.className = 'list-group-item list-group-item-action p-3 d-flex align-items-start';
                        postElement.innerHTML = `
                            <div style="flex: 1 1 33.33%;" class="me-3"> <!-- Image container -->
                                <img src="${imageSrc}" alt="${post.title} Thumbnail" class="w-100" style="height: 60px; object-fit: cover;">
                            </div>
                            <div style="flex: 2 1 66.67%;"> <!-- Text container -->
                                <div class="fw-semibold small">${post.title}</div>
                                <div class="small text-muted">${post.creationDate}</div>
                            </div>
                        `;
                        container.appendChild(postElement);
                    });
                }
            });
        </script>
    </body>
</html>